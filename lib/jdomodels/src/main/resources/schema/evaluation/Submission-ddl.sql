CREATE TABLE IF NOT EXISTS JDOSUBMISSION (
    ID BIGINT NOT NULL,
    NAME varchar(256) CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci,
    EVALUATION_ID BIGINT NOT NULL,
    EVALUATION_ROUND_ID BIGINT DEFAULT NULL,
    USER_ID BIGINT NOT NULL,
    SUBMITTER_ALIAS varchar(256) CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci,
    ENTITY_ID BIGINT NOT NULL,
    ENTITY_BUNDLE mediumblob,
    ENTITY_VERSION BIGINT NOT NULL,
    CREATED_ON BIGINT NOT NULL,
    TEAM_ID BIGINT,
    DOCKER_REPO_NAME varchar(400) CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci,
    DOCKER_DIGEST varchar(200) CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci,
    PRIMARY KEY (ID),
    KEY (DOCKER_REPO_NAME),
    FOREIGN KEY (EVALUATION_ID) REFERENCES JDOEVALUATION (ID) ON DELETE CASCADE,
   	FOREIGN KEY (USER_ID) REFERENCES JDOUSERGROUP (ID),
  	FOREIGN KEY (TEAM_ID) REFERENCES TEAM (ID),
  	# in java code we do not allow an EvaluationRound to be deleted if it has Submissions that reference it,
  	# but upon deletion of an entire Evaluation, we want both the EvaluationRounds and Submissions associated with it to be deleted
    CONSTRAINT `JDOSUBMISSION_EVALUATION_ROUNDS_ID_FK` FOREIGN KEY (`EVALUATION_ROUND_ID`) REFERENCES `EVALUATION_ROUNDS` (`ID`) ON DELETE CASCADE
);
