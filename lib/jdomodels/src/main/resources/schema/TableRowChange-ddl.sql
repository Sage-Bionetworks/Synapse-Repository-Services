CREATE TABLE IF NOT EXISTS `TABLE_ROW_CHANGE` (
  `TABLE_ID` bigint(20) NOT NULL,
  `ROW_VERSION` bigint(20) NOT NULL,
  `ETAG` char(36) NOT NULL,
  `CREATED_BY`  bigint(20)  NOT NULL,
  `CREATED_ON`  bigint(20)  NOT NULL,
  `S3_BUCKET`	varchar(256) CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci NOT NULL,
  `S3_KEY`		varchar(256) CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci,
  `ROW_COUNT` bigint(20) NOT NULL,
  `CHANGE_TYPE` ENUM('ROW','COLUMN') DEFAULT 'ROW',
  `TRX_ID` bigint(20) DEFAULT NULL,
  PRIMARY KEY (`TABLE_ID`,`ROW_VERSION`),
  KEY `TRC_ETAG_INDEX` (`ETAG`),
  CONSTRAINT `TABLE_TRX_ID_FK` FOREIGN KEY (`TRX_ID`) REFERENCES `TABLE_TRANSACTION` (`TRX_ID`) ON DELETE RESTRICT,
  CONSTRAINT `TABLE_ID_FK` FOREIGN KEY (`TABLE_ID`) REFERENCES `TABLE_ID_SEQUENCE` (`TABLE_ID`) ON DELETE CASCADE
)
